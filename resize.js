function crop(e,t,r){return new Promise((a,n)=>{let c=document.createElement("img");c.onload=e=>{URL.revokeObjectURL(c.src);let n=t/r,o=c.naturalWidth,i=c.naturalHeight,l,R,g,d;n>=o/i?(g=o,l=0,R=(i-(d=o/n))/2):(g=i*n,d=i,l=(o-g)/2,R=0);let h=document.createElement("canvas");h.width=t,h.height=r,h.getContext("2d").drawImage(c,l,R,g,d,0,0,t,r),a(h.toDataURL())},c.onerror=e=>{URL.revokeObjectURL(c.src),n("ERROR: File is not an image")},c.src=URL.createObjectURL(e)})}function fit(e,t,r){return new Promise((a,n)=>{let c=document.createElement("img");c.onload=e=>{URL.revokeObjectURL(c.src);let n=t/r,o=c.naturalWidth,i=c.naturalHeight,l=o/i;o<=t&&i<=r?(t=o,r=i):l>=n?r=t/l:t=r*l;let R=document.createElement("canvas");R.width=t,R.height=r,R.getContext("2d").drawImage(c,0,0,t,r),a(R.toDataURL())},c.onerror=e=>{URL.revokeObjectURL(c.src),n("ERROR: File is not an image")},c.src=URL.createObjectURL(e)})}